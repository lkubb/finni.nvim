*finni.txt*                                Sublime project-focused autosessions.

    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘
    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘
    â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•šâ•â•â•šâ•â•  â•šâ•â•â•â•  â•šâ•â•â•â•  â•šâ•â•â•šâ•â•     â•šâ•â•


A flexible, project-focused autosession plugin for Neovim,               *finni*
unbound by the limits of `:mksession`.                                *finni.nvim*

==============================================================================
Table of Contents

 1. âœ¨ Features ............................................... |finni-features|
 2. â›“ï¸ Dependencies ....................................... |finni-dependencies|
 3. ğŸ“¦ Setup ..................................................... |finni-setup|
   â€¢ `vim.pack` ........................................... |finni-setup-vim-pack|
   â€¢ `lazy.nvim` ......................................... |finni-setup-lazy-nvim|
   â€¢ `mini.deps` ......................................... |finni-setup-mini-deps|
 4. ğŸš€ Usage ..................................................... |finni-usage|
   â€¢ Keymaps ............................................. |finni-usage-keymaps|
   â€¢ Ex command ....................................... |finni-usage-ex-command|
 5. ğŸ‘¤ Concepts ............................................... |finni-concepts|
 6. â— Limitations and caveats ................. |finni-limitations-and-caveats|
 7. âš™ï¸ Configuration ..................................... |finni-configuration|
   â€¢ Defaults ................................... |finni-configuration-defaults|
   â€¢ `autosession` ............................. |finni-configuration-autosession|
   â€¢ `extensions` ............................... |finni-configuration-extensions|
   â€¢ `load` ........................................... |finni-configuration-load|
   â€¢ `log` ............................................. |finni-configuration-log|
   â€¢ `session` ..................................... |finni-configuration-session|
 8. ğŸ“’ Recipes ................................................. |finni-recipes|
   â€¢ Tab-scoped Sessions ................... |finni-recipes-tab-scoped-sessions|
   â€¢ Custom Extension ......................... |finni-recipes-custom-extension|
 9. ğŸ”Œ API ......................................................... |finni-api|
   â€¢ `finni.session` (Module) .................................... |finni.session|
   â€¢ `finni.auto` (Module) .......................................... |finni.auto|
10. ğŸ§© Extensions ........................................... |finni-extensions|
   â€¢ Built-in ...................................... |finni-extensions-built-in|
   â€¢ External ...................................... |finni-extensions-external|
11. â“ FAQ ......................................................... |finni-faq|

==============================================================================
âœ¨ Features                                                     *finni-features*
â€¢ {Comprehensiveâ€…snapshots} of the current Neovim state:
  â€¢ Preserve your entire workspace: tabs, window layout, open buffers,
    cursor positions, and relevant buffer/window/global options.
  â€¢ Preserve {unsavedâ€…changes} and corresponding {undoâ€…history},
    including for unnamed buffers.
  â€¢ Preserve navigation state: {jumplists} (each window separately,
    unlike ShaDa), {changelists}, {loclists}, {quickfix} lists,
    including your current position in each, and buffer-local/global
    {marks}.
  â€¢ Snapshot restoration is compatible with `lazy.nvim`
    `VeryLazy`-loaded plugins.
â€¢ {Automaticâ€…sessionâ€…management} (opt-in):
  â€¢ Automatically create, save, and restore snapshots per directory,
    Git repository and branch.
  â€¢ Autoswitch sessions when changing branches (`git switch`) or
    directories (`:cd`).
â€¢ {Separateâ€…Neovimâ€…scopes}, by default: directory or Git
  repository/branch. This prevents (similar to scope-specific ShaDa
  via 'shadafile')
  â€¢ mangling of unrelated command/search/input/expr/debug histories.
  â€¢ going back the jumplist (`CTRL-o`) and ending up in a seemingly
    random file.
â€¢ {Highlyâ€…customizable}:
  â€¢ Override, filter, or extend what gets saved or restored â€”
    globally, per project, or per session.
  â€¢ Add {customâ€…extensions} to restore state from other plugins.
  â€¢ React to events with {customâ€…hooks}.
  â€¢ {Defineâ€…scopes} in code however you like: directory basename,
    weekday, `head -c 1 /dev/random` (y tho?), â€¦
  â€¢ E.g., itâ€™s possible to (ab)use autosession loading logic to
    start into predefined layouts, depending on the directory you
    execute Neovim in.
â€¢ Lua API (|finni.session|) for 'nomagic'
  {manualâ€…sessionâ€…management}, including tab-scoped sessions
  â€¢ This API is mostly backwards-compatible with `resession.nvim`
    <https://github.com/stevearc/resession.nvim>. (Finni started by
    forking it, a heartfelt thank you @stevearc for laying the arduous
    ground work! <3)
  â€¢ For the brave, an even more low-level session and snapshot API
    (`finni.core.session`, `finni.core.snapshot`) is available.


==============================================================================
â›“ï¸ Dependencies                                             *finni-dependencies*
â€¢ Neovim 0.10+
â€¢ `lewis6991/gitsigns.nvim`
  <https://github.com/lewis6991/gitsigns.nvim/> (optional) for branch
  monitoring


==============================================================================
ğŸ“¦ Setup                                                           *finni-setup*
A general description follows. For specific plugin managers, see below.

1. Add this plugin to your 'runtimepath'.
2. (optional) Override the |finni-configuration-defaults| by assigning a
   configuration table (|finni.UserConfig|) to `g:finni_config`.
3. (optional) Enable startup autosessions by setting `g:finni_autosession`
   to `true`.
4. (optional) Define |finni-usage-keymaps|.

You donâ€™t need to call `setup()`. You donâ€™t need to handle
lazy-loading yourself. Finni is always there for you when you need him.

                                                          *finni-setup-vim-pack*
`vim.pack` ~
{{{
>lua
    vim.pack.add("https://github.com/lkubb/finni.nvim")
    ---@type finni.auto.InitHandler|boolean
    vim.g.finni_autosession = true -- optionally enable startup autosessions
    ---@type finni.UserConfig
    vim.g.finni_config = { --[[ custom options/overrides ]] }
<
}}}

                                                         *finni-setup-lazy-nvim*
`lazy.nvim` ~
{{{
>lua
    {
      "lkubb/finni.nvim",
      -- This plugin only ever loads as much as needed.
      -- You don't need to manage lazyloading manually.
      -- Initialization is only triggered if you enable startup autosessions
      -- and an autosession is defined for the current environment
      -- or once you invoke the Finni Lua API/Ex command.
      lazy = false,
      -- If you don't want to enable startup autosessions, you can use
      --  `opts` for custom configuration (or omit it if you want to use defaults).
      init = function()
        ---@type finni.auto.InitHandler|boolean
        vim.g.finni_autosession = true -- optionally enable startup autosessions
        ---@type finni.UserConfig
        vim.g.finni_config = { --[[ custom options/overrides ]] }
      end,
    }
<
}}}

                                                         *finni-setup-mini-deps*
`mini.deps` ~
{{{
>lua
    MiniDeps.add({
      source = "lkubb/finni.nvim",
      checkout = "main",
    })
    ---@type finni.auto.InitHandler|boolean
    vim.g.finni_autosession = true -- optionally enable startup autosessions
    ---@type finni.UserConfig
    vim.g.finni_config = { --[[ custom options/overrides ]] }
<
}}}


==============================================================================
ğŸš€ Usage                                                           *finni-usage*
First, decide whether you want to follow a mostly hands-off approach
with autosessions or prefer the more predictable route of managing
your sessions manually.

Especially with autosessions, try to get an intuition for its inner
workings before relying on this plugin for important work. If you
prefer reading, see the |finni-concepts| section below for details
on this topic.

In any case, make sure you give the |finni-limitations-and-caveats|
a quick read.

Later, you can customize the |finni-configuration| and check if you want
to enable some |finni-extensions| to restore windows of your plugins.


KEYMAPS                                                    *finni-usage-keymaps*
Finni does not include default keymaps since different users will have
very divergent needs and preferences. Set-and-forget startup autosession
users might never need any in the first place, especially since the
`:Finni` command exposes large parts of the Lua API for the rare case
where they would want to intervene. The most useful command to map is
`:Finni reset`, in the authorâ€™s opinion.

Still, here is an example setup that focuses on {autosessions}:
{{{
>lua
    -- Without startup autosessions, you need to enter Finni explicitly.
    -- This runs the autosession logic and sets up environment monitoring.
    vim.keymap.set("n", "<leader>Ss", "<cmd>Finni start<cr>", { desc = "[S]ession [S]tart" })
    -- Delete active autosession, reset Neovim to a clean state and attach a fresh autosession.
    vim.keymap.set("n", "<leader>SR", "<cmd>Finni reset<cr>", { desc = "[S]ession [R]eset" })
    -- Detach active session. Autosessions are still triggered by environment changes.
    vim.keymap.set("n", "<leader>Sd", "<cmd>Finni detach<cr>", { desc = "[S]ession [D]etach" })
    -- Detach active session and stop environment monitoring.
    vim.keymap.set("n", "<leader>SS", "<cmd>Finni stop<cr>", { desc = "[S]ession [S]top" })
    -- List all sessions in the current project
    vim.keymap.set("n", "<leader>Sl", "<cmd>Finni list<cr>", { desc = "[S]essions [L]ist" })
    -- Inspect the active session
    vim.keymap.set("n", "<leader>Si", "<cmd>Finni info<cr>", { desc = "[S]ession [I]nfo" })
<
}}}

And here is a basic one for {manualâ€…sessions}
{{{
>lua
    -- Load a session. Displays an interactive selection.
    vim.keymap.set("n", "<leader>Sl", function() require("finni.session").load() end, { desc = "[S]ession [L]oad" })
    -- Save the current state to a global snapshot.
    -- If no session is active, prompts for snapshot/session name to save as.
    vim.keymap.set("n", "<leader>Ss", function() require("finni.session").save() end, { desc = "[S]ession [S]ave" })
    -- Detach active session and reset all buffers/windows/tabs associated with it.
    vim.keymap.set("n", "<leader>Sc", function() require("finni.session").detach(nil, nil, {reset = true}) end, { desc = "[S]ession [C]lose" })
    -- Delete a session. Displays an interactive selection.
    vim.keymap.set("n", "<leader>SD", function() require("finni.session").delete() end, { desc = "[S]ession [D]elete" })
<
}}}


EX COMMAND                                              *finni-usage-ex-command*
Finni creates an Ex command with the same name (`:Finni`). It currently
exposes the autosession API (|finni.auto|) only.

1. Make the first argument the name of the Lua function to execute: >
       :Finni reset
<
2. Follow with positional arguments (`nil`, `false`, `true` are parsed): >
       :Finni load /home/me/code/my_project
<
3. Pass `opts` table keys as keyword arguments (by name): >
       :Finni detach save=false reset=true
<
4. Full example: >
       :Finni load /home/me/code/my_project modified=false
<


==============================================================================
ğŸ‘¤ Concepts                                                     *finni-concepts*
                                                        *finni-concepts-project*
â€¢ A {project} is a container for one or more related sessions that can
  share some data. Itâ€™s only relevant for autosessions currently.
                                                       *finni-concepts-snapshot*
â€¢ A {snapshot} is the save data required to restore a specific Neovim
  state. It consists of a JSON data file and optional related files
  (ShaDa, unwritten buffer contents, undo histories for unwritten
  buffers).
                                                        *finni-concepts-session*
â€¢ A {session} is the relation between current Neovim state and an
  on-disk snapshot.
                                                    *finni-concepts-autosession*
â€¢ An {autosession} is a session that is derived from an environment.
  Itâ€™s restored and attached automatically when triggered. Mixing
  manual and autosession usage is _discouraged_ currently. Interplay
  is TBD.
                                                 *finni-concepts-global-session*
â€¢ A {globalâ€…session} persists everything into its snapshot.
  Autosessions are always global sessions currently.
                                                    *finni-concepts-tab-session*
â€¢ A {tab-scopedâ€…session} does not include global state. It only
  persists windows in its associated tab. By default, persisted buffers
  are still the same as in global sessions.
                                               *finni-concepts-snapshot-restore*
â€¢ {Restoring} a snapshot loads the saved state into the Neovim instance.
  If itâ€™s a dirty instance, restoration can either reset Neovimâ€™s
  state to a clean one or merge it with the snapshot. By default,
  restoring a global snapshot resets everything in your Neovim instance,
  while tab snapshots are restored into a fresh tab. Itâ€™s possible to
  restore snapshots without attaching the session after.
                                                 *finni-concepts-session-attach*
â€¢ {Attaching} a session means (auto)save operations overwrite the
  snapshot it points to, using the configuration that was derived when
  attaching it. There can only be one attached (active) global session,
  but several tab sessions at a time. Mixing both types is _discouraged_
  currently. Interplay is TBD.
                                                 *finni-concepts-session-detach*
â€¢ {Detaching} a session means save operations no longer overwrite the
  snapshot it points to. It can optionally be combined with closing
  associated buffers/windows/tabs (see reset below).
                                           *finni-concepts-session-detach-reset*
â€¢ A {reset} during _session detaching_ implies
  {onlyâ€…session-associated} resources (those persisted to its
  snapshot) are closed.
                                         *finni-concepts-snapshot-restore-reset*
â€¢ A {reset} during _snapshot restoration_ implies {all} Neovim resources
  are closed (buffers, windows, tabs). {Hint:} Loading a global
  session implies potentially detaching an active session, followed
  by snapshot restoration.
                                                       *finni-concepts-autosave*
â€¢ {Autosaving} means that an attached session is saved automatically
  at specific points in Neovimâ€™s lifetime:
  â€¢ before the session is detached
  â€¢ when Neovim is closed
  â€¢ in regular intervals

==============================================================================
â— Limitations and caveats                       *finni-limitations-and-caveats*
â€¢ Although the snapshot logic is relatively proven, many aspects of how
  autosessions work, more "exotic" persistency types and their config
  have not been designed on a drafting board. The sole user has been me,
  while at the same time developing Finni over the last year. Expect
  surprises and some clunkiness, for now, but feel free to create an
  issue <https://github.com/lkubb/finni.nvim/issues/new/choose> if that
  happens to you. I want this plugin to be useful to many people.
â€¢ A similar caveat applies to the interplay between different kinds of
  sessions, which is explicitly _to be determined_. The safest bet are
  global sessions, but stick to either manual OR automatic ones.
â€¢ Donâ€™t rely on preservation of modified buffers for highly valuable
  or otherwise significant work, or if you do, donâ€™t curse me when you
  lose it. With that said, it has been quite reliable during my usage.


==============================================================================
âš™ï¸ Configuration                                           *finni-configuration*
                                                  *finni-configuration-defaults*
DEFAULTS
{{{
>lua
    {
      autosession = {
        config = {
          modified = false,
        },
        dir = "finni",
        spec = render_autosession_context,
        workspace = util.git.find_workspace_root,
        project_name = util.auto.workspace_project_map,
        session_name = util.auto.generate_name,
        enabled = function(meta)
          return true
        end,
        load_opts = function(meta)
          return {}
        end,
      },
      extensions = {
        quickfix = {},
      },
      load = {
        detail = true,
        order = "modification_time",
      },
      log = {
        level = "warn",
        format = "[%(level)s %(dtime)s] %(message)s%(src_sep)s[%(src_path)s:%(src_line)s]",
        notify_level = "warn",
        notify_format = "%(message)s",
        notify_opts = { title = "Finni" },
        time_format = "%Y-%m-%d %H:%M:%S",
      },
      session = {
        dir = "session",
        options = {
          "binary",
          "bufhidden",
          "buflisted",
          "cmdheight",
          "diff",
          "filetype",
          "modifiable",
          "previewwindow",
          "readonly",
          "scrollbind",
          "winfixheight",
          "winfixwidth",
        },
        buf_filter = default_buf_filter,
        tab_buf_filter = function(tabpage, bufnr, opts)
          return true
        end,
        modified = "auto",
        autosave_enabled = false,
        autosave_interval = 60,
        autosave_notify = true,
        command_history = "auto",
        search_history = "auto",
        input_history = "auto",
        expr_history = "auto",
        debug_history = "auto",
        jumps = "auto",
        changelist = "auto",
        global_marks = "auto",
        local_marks = "auto",
      },
    }
<
}}}

                                                              *finni.UserConfig*

                                               *finni-configuration-autosession*
`autosession` ~
    Type: ~
      |finni.UserConfig.autosession|`?`

    Influence autosession behavior and contents. Specify defaults that apply
    to all autosessions. By overriding specific hooks, you can minutely
    customize almost any aspect of when an autosession is triggered, how
    itâ€™s handled and what is persisted in it.

    Table fields ~
{{{
      â€¢ {config}? |finni.core.Session.InitOpts|
          Save/load configuration for autosessions. Definitions in here
          override the defaults in `session`.

          Table fields:
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
      â€¢ {dir}? `string`
          Name of the directory to store autosession projects in. Interpreted
          relative to `$XDG_STATE_HOME/$NVIM_APPNAME`. Defaults to `finni`.
      â€¢ {spec}? |finni.auto.SpecHook|
          This function implements the logic that derives the autosession spec
          from a path, usually the current working directory. If it returns an
          autosession spec, Finni automatically switches to the sessionâ€™s
          workspace root and tries to restore an existing matching session
          (matched by project name + session name). If it returns nothing,
          itâ€™s interpreted as "no autosession should be active".

          It is called during various points in Finniâ€™s lifecycle: 1. Neovim
          startup (if startup autosessions are enabled) 2. When Neovim changes
          its global working directory 3. When a git branch is switched (if
          you have installed gitsigns.nvim)

          If the return value does not match the current state, the currently
          active session (if any) is saved + closed and the new session
          (if any) restored.

          The default implementation calls `workspace`, `project_name`,
          `session_name`, `enabled` and `load_opts` to piece together the
          specification. By overriding this config field, you can implement
          a custom logic. Mind that the other hooks have no effect then
          (unless you call them manually).
      â€¢ {workspace}? |finni.auto.WorkspaceHook|
          Receive the effective nvim cwd, return workspace root and whether
          it is git-tracked.
      â€¢ {project_name}? |finni.auto.ProjectNameHook|
          Receive the workspace root dir and whether itâ€™s git-tracked,
          return the project-specific session directory name.
      â€¢ {session_name}? |finni.auto.SessionNameHook|
          Receive the effective nvim cwd, the workspace root, the project name
          and workspace repo git info and generate a session name.
      â€¢ {enabled}? |finni.auto.EnabledHook|
          Receive the effective nvim cwd, the workspace root and project
          name and decide whether an autosession with this configuration
          should be active.
      â€¢ {load_opts}? |finni.auto.LoadOptsHook|
          Influence how an autosession is loaded/persisted, e.g.Â load the
          session without attaching it or disable modified persistence.
          Merged on top of the default autosession configuration for this
          specific autosession only.
}}}


                                                *finni-configuration-extensions*
`extensions` ~
    Type: ~
      `table<string,any>?`

    Configuration for extensions, both Resession ones and those specific
    to Finni. Note: Finni first tries to load specified extensions in
    `finni.extensions`, but falls back to `resession.extension` with a
    warning. Avoid this overhead for Resession extensions by specifying
    `resession_compat = true` in the extension config.

                                                      *finni-configuration-load*
`load` ~
    Type: ~
      |finni.UserConfig.load|`?`

    Configure session list information detail and sort order.

    Table fields ~
{{{
      â€¢ {detail}? `boolean`
          Show more detail about the sessions when selecting one to load.
          Disable if it causes lag.
      â€¢ {order}? `("modification_time"|"creation_time"|"filename")`
          Session list order
}}}


                                                       *finni-configuration-log*
`log` ~
    Type: ~
      |finni.UserConfig.log|`?`

    Configure plugin logging.

    Table fields ~
{{{
      â€¢ {level}? `("trace"|"debug"|"info"|"warn"|"error"|"off")`
          Minimum level to log at. Defaults to `warn`.
      â€¢ {notify_level}? `("trace"|"debug"|"info"|"warn"|"error"|"off")`
          Minimum level to use `vim.notify` for. Defaults to `warn`.
      â€¢ {notify_opts}? `table`
          Options to pass to `vim.notify`. Defaults to `{ title = "Finni" }`
      â€¢ {format}? `string`
          Log line format string. Note that this works
          like Pythonâ€™s f-strings. Defaults to
          `[%(level)s %(dtime)s] %(message)s%(src_sep)s[%(src_path)s:%(src_line)s]`.
          Available parameters: * `level` Uppercase level name * `message`
          Log message * `dtime` Formatted date/time string * `hrtime` Time
          in `[ns]` without absolute anchor * `src_path` Path to the file
          that called the log function * `src_line` Line in `src_path` that
          called the log function * `src_sep` Whitespace between log line
          and source of call, 2 tabs for single line, newline + tab for
          multiline log messages
      â€¢ {notify_format}? `string`
          Same as `format`, but for `vim.notify` message display. Defaults
          to `%(message)s`.
      â€¢ {time_format}? `string`
          `strftime` format string used for rendering time of call. Defaults
          to `%Y-%m-%d %H:%M:%S`
      â€¢ {handler}? `fun(line: `|finni.log.Line|`)`
}}}


                                                   *finni-configuration-session*
`session` ~
    Type: ~
      |finni.UserConfig.session|`?`

    Configure default session behavior and contents, affects both manual and
    autosessions. Note: In the following field descriptions, "this session"
    refers to all sessions that donâ€™t override these defaults.

    Table fields ~
{{{
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {dir}? `string`
          Name of the directory to store regular sessions in. Interpreted
          relative to `$XDG_STATE_HOME/$NVIM_APPNAME`.
}}}


==============================================================================
ğŸ“’ Recipes                                                       *finni-recipes*
                                             *finni-recipes-tab-scoped-sessions*
TAB-SCOPED SESSIONS
{{{
When saving a session, only save the current tab

>lua
    -- Bind `save_tab` instead of `save`
    local session = require("finni.session")

    vim.keymap.set("n", "<leader>ss", session.save_tab)
    vim.keymap.set("n", "<leader>sl", session.load)
    vim.keymap.set("n", "<leader>sd", session.delete)
<
This only saves the current tabpage layout, but _all_ of the open
buffers. You can provide a filter to exclude buffers. For example, if
you are using `:tcd` to have tabs open for different directories, this
only saves buffers in the current tabpage directory:

>lua
    vim.g.finni_config = {
      tab_buf_filter = function(tabpage, bufnr)
        local dir = vim.fn.getcwd(-1, vim.api.nvim_tabpage_get_number(tabpage))
        -- ensure dir has trailing /
        dir = dir:sub(-1) ~= "/" and dir .. "/" or dir
        return vim.startswith(vim.api.nvim_buf_get_name(bufnr), dir)
      end,
    }
<
}}}

                                                *finni-recipes-custom-extension*
CUSTOM EXTENSION
{{{
You can save custom session data with your own extension.

To create one, add a file to your runtimepath at
`lua/finni/extensions/<myplugin>.lua`. Add the following contents:

>lua
    local M = {}

    --- Called when saving a session. Should return necessary state.
    ---@param opts (resession.Extension.OnSaveOpts & finni.core.snapshot.Context)
    ---@param buflist finni.core.snapshot.BufList
    ---@return any
    M.on_save = function(opts, buflist)
      return {}
    end

    --- Called before restoring anything, receives the data returned by `on_save`.
    ---@param data any Data returned by `on_save`
    ---@param opts finni.core.snapshot.Context
    ---@param buflist string[]
    M.on_pre_load = function(data)
      -- This is run before the buffers, windows, and tabs are restored
    end

    --- Called after restoring everything, receives the data returned by `on_save`.
    ---@param data any Data returned by `on_save`
    ---@param opts finni.core.snapshot.Context
    ---@param buflist string[]
    M.on_post_load = function(data)
      -- This is run after the buffers, windows, and tabs are restored
    end

    --- Called when Finni gets configured.
    --- This function is optional.
    ---@param data table Configuration data passed in the config (in `extensions.<extension_name>`)
    M.config = function(data)
      -- Optional setup for your extension
    end

    --- Check if a window is supported by this extension.
    --- This function is optional, but if provided `save_win` and `load_win` must
    --- also be present.
    ---@param winid integer
    ---@param bufnr integer
    ---@return boolean
    M.is_win_supported = function(winid, bufnr)
      return false
    end

    --- Save data for a window. Called when `is_win_supported` returned true.
    --- Note: Finni does not focus tabs or windows during session save,
    ---       so the current window/buffer will most likely be a different one than `winid`.
    ---@param winid integer
    ---@return any
    M.save_win = function(winid)
      -- This is used to save the data for a specific window that contains a non-file buffer (e.g. a filetree).
      return {}
    end

    --- Called after creating a tab's windows with the data from `save_win`.
    ---@param winid integer
    ---@param data any
    ---@param win finni.core.layout.WinInfo
    ---@return integer? new_winid If the original window has been replaced, return the new ID that should replace it
    M.load_win = function(winid, config, win)
      -- Restore the window from the config
    end

    return M
<
Enable your extension by adding a corresponding key in the `extensions`
option:

>lua
    vim.g.finni_config = {
      extensions = {
        myplugin = {
          -- This table is passed to M.config(). It can be empty.
        },
      },
    }
<
For tab-scoped sessions, the `on_save` and `on_load` methods of
extensions are {disabledâ€…byâ€…default}. You can force-enable them by
setting the `enable_in_tab` option to `true` (itâ€™s an inbuilt option
respected for all extensions).

>lua
    vim.g.finni_config = {
      -- ...
      extensions = {
        myplugin = {
          enable_in_tab = true,
        },
      }
    }
<
}}}


==============================================================================
ğŸ”Œ API                                                               *finni-api*


                                                                 *finni.session*
`finni.session` (MODULE) ~

    Interactive API, (mostly) compatible with stevearc/resession.nvim.


save({name}, {opts})                                      *finni.session.save()*
    Save the current global state to disk

    Parameters: ~
      â€¢ {name}? `string`
          Name of the global session to save. If not provided, takes name
          of attached one or prompts user.
      â€¢ {opts}? `(`|finni.session.SaveOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {dir}? `string`
              Name of session directory (overrides config.dir)
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
}}}

save_tab({name}, {opts})                              *finni.session.save_tab()*
    Save the state of the current tabpage to disk

    Parameters: ~
      â€¢ {name}? `string`
          Name of the tabpage session to save. If not provided, takes name of
          attached one in current tabpage or prompts user.
      â€¢ {opts}? `(`|finni.session.SaveOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {dir}? `string`
              Name of session directory (overrides config.dir)
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
}}}

save_all({opts})                                      *finni.session.save_all()*
    Save all currently attached sessions to disk

    Parameters: ~
      â€¢ {opts}? `(`|finni.SideEffects.Notify|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {notify}? `boolean`
              Notify on success
}}}

load({name}, {opts})                                      *finni.session.load()*
    Load a session from disk.

    Note: The default value of `opts.reset = "auto"` resets when loading a
    normal session, but _not_ when loading a tab-scoped session.

    Parameters: ~
      â€¢ {name}? `string`
          Name of the session to load from session dir. If not provided,
          prompts user.
      â€¢ {opts}? `(`|finni.session.LoadOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {dir}? `string`
              Name of session directory (overrides config.dir)
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {reset}? `(boolean|"auto")`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot. `auto` resets only for global sessions.
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

detach({target}, {reason}, {opts})                      *finni.session.detach()*
    Detach from the session that contains the target (or all active sessions
    if unspecified).

    Parameters: ~
      â€¢ {target}? `("__global"|"__active"|"__active_tab"|"__all_tabs"|string|integer...)`
          The scope/session name/tabid to detach from. If unspecified,
          detaches all sessions.
      â€¢ {reason}? `(`|finni.core.Session.DetachReasonBuiltin|`|string)`
          Pass a custom reason to detach handlers. Defaults to `request`.
      â€¢ {opts}? `(`|finni.core.Session.DetachOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
}}}


    Returns: ~
        {detached} `boolean`
          Whether we detached from any session

list({opts})                                              *finni.session.list()*
    List all available saved sessions in session dir

    Parameters: ~
      â€¢ {opts}? |finni.session.DirParam|
          Table fields:{{{
          â€¢ {dir}? `string`
              Name of session directory (overrides config.dir)
}}}


    Returns: ~
        {sessions_in_dir} `string[]`

delete({name}, {opts})                                  *finni.session.delete()*
    Delete a saved session from session dir

    Parameters: ~
      â€¢ {name}? `string`
          Name of the session. If not provided, prompts user
      â€¢ {opts}? `(`|finni.session.DeleteOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {dir}? `string`
              Name of session directory (overrides config.dir)
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}


                                                                    *finni.auto*
`finni.auto` (MODULE) ~

save({opts})                                                 *finni.auto.save()*
    Save the currently active autosession.

    Parameters: ~
      â€¢ {opts}? `(`|finni.auto.SaveOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
}}}

detach({opts})                                             *finni.auto.detach()*
    Detach from the currently active autosession. If autosave is enabled,
    save it. Optionally close {everything}.

    Parameters: ~
      â€¢ {opts}? `(`|finni.core.Session.DetachOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
}}}

load({autosession}, {opts})                                  *finni.auto.load()*
    Load an autosession.

    Parameters: ~
      â€¢ {autosession}? `(`|finni.auto.AutosessionContext|`|string)`
          The autosession table as rendered by `get_ctx` or cwd to pass to it
      â€¢ {opts}? |finni.auto.LoadOpts|
          Table fields:{{{
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
          â€¢ {reset}? `(boolean|"auto")`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot. `auto` resets only for global sessions.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

reload()                                                   *finni.auto.reload()*
    If an autosession is active, save it and detach. Then try to start a
    new one.

start({cwd}, {opts})                                        *finni.auto.start()*
    Start Finni: 1. If the current working directory has an associated project
    and session, closes everything and loads that session. 2. In any case,
    start monitoring for directory or branch changes.

    Parameters: ~
      â€¢ {cwd}? `string`
          Working directory to switch to before starting autosession. Defaults
          to nvimâ€™s processâ€™ cwd.
      â€¢ {opts}? |finni.auto.LoadOpts|
          Table fields:{{{
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
          â€¢ {reset}? `(boolean|"auto")`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot. `auto` resets only for global sessions.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

stop()                                                       *finni.auto.stop()*
    Stop Finni: 1. If weâ€™re inside an active autosession, save it and
    detach. Keep buffers/windows/tabs etc. by default. 2. In any case, stop
    monitoring for directory or branch changes.

reset({opts})                                               *finni.auto.reset()*
    Delete the currently active autosession. Close {everything}. Attempt to
    start a new autosession (optionally).

    Parameters: ~
      â€¢ {opts}? |finni.auto.ResetOpts|
          Table fields:{{{
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {cwd}? `(string|true)`
              Path to a directory associated with the session to reset
              instead of current one. Set this to `true` to use nvimâ€™s
              current global CWD.
          â€¢ {reload}? `boolean`
              Attempt to restart a new autosession after reset. Defaults
              to true.
}}}

reset_project({opts})                               *finni.auto.reset_project()*
    Remove all autosessions associated with a project. If the target is the
    active project, reset current session as well and close {everything}.

    Parameters: ~
      â€¢ {opts}? |finni.auto.ResetProjectOpts|
          Table fields:{{{
          â€¢ {name}? `string`
              Specify the project to reset. If unspecified, resets active
              project, if available.
          â€¢ {force}? `boolean`
              Force recursive deletion of project dir outside of configured
              root
}}}

list({opts})                                                 *finni.auto.list()*
    List autosessions associated with a project.

    Parameters: ~
      â€¢ {opts}? |finni.auto.ListOpts|
          Specify the project to list. If unspecified, lists active project,
          if available.

          Table fields:{{{
          â€¢ {cwd}? `string`
              Path to a directory associated with the project to list
          â€¢ {project_dir}? `string`
              Path to the project session dir
          â€¢ {project_name}? `string`
              Name of the project
}}}


    Returns: ~
        {session_names} `string[]`
          List of known sessions associated with project

list_projects({opts})                               *finni.auto.list_projects()*
    List all known projects.

    Parameters: ~
      â€¢ {opts}? |finni.auto.ListProjectOpts|
          Table fields:{{{
          â€¢ {with_sessions}? `boolean`
              Additionally list all known sessions for each listed project.
              Defaults to false.
}}}


    Returns: ~
        `string[]`

migrate_projects({opts})                         *finni.auto.migrate_projects()*
    Dev helper currently (beware: unstable/inefficient). When changing the
    mapping from workspace to project name, all previously saved states
    would be lost. This tries to migrate state data to the new mapping,
    cleans projects whose cwd does not exist anymore or which are disabled
    Caution! This does not account for projects with multiple associated
    directories/sessions! Checks the first sessionâ€™s cwd/enabled state only!

    Parameters: ~
      â€¢ {opts}? |finni.auto.MigrateProjectsOpts|
          Options for migration. You need to pass `{dry_run = false}` for
          this function to have an effect.

          Table fields:{{{
          â€¢ {dry_run}? `boolean`
              Donâ€™t execute the migration, only show what would have
              happened. Defaults to true, meaning you need to explicitly set
              this to `false` to have an effect.
          â€¢ {old_root}? `string`
              If the value of `autosession.dir` has changed, the old value.
              Defaults to `autosession.dir`.
}}}


    Returns: ~
        {migration_result} `table<("broken"|"missing"|"skipped"|"migrated"...),table[]>`

info({opts})                                                 *finni.auto.info()*
    Return information about the currently active session. Includes
    autosession information, if it is an autosession.

    Parameters: ~
      â€¢ {opts}? `{ with_snapshot: boolean? }`
          Table fields:{{{
          â€¢ {with_snapshot}? `boolean`
}}}


    Returns: ~
        {active_info}? |finni.auto.ActiveAutosessionInfo|
          Information about the active session, even if not an autosession.
          Always includes snapshot configuration, session meta config and
          whether it is an autosession. For autosessions, also includes
          autosession config.

==============================================================================
ğŸ§© Extensions                                                 *finni-extensions*

BUILT-IN                                             *finni-extensions-built-in*
quickfix           Persist all quickfix lists, currently active list,
                   active position in list and quickfix window.

colorscheme        Persist color scheme.

dap                Persist nvim-dap
                   <https://github.com/mfussenegger/nvim-dap>
                   breakpoints

neogit             Persist neogit <https://github.com/NeogitOrg/neogit>
                   status and commit views.

oil.nvim           Persist oil.nvim
                   <https://github.com/stevearc/oil.nvim> windows.
                   Note: Customized from the one embedded in `oil.nvim`
                   to correctly restore view.


EXTERNAL                                             *finni-extensions-external*
Here are some examples of external extensions:

aerial.nvim          See https://github.com/stevearc/aerial.nvim
                     Note: For Resession, which is compatible with
                     Finni.

overseer.nvim        See https://github.com/stevearc/overseer.nvim
                     Note: For Resession, which is compatible with
                     Finni.


==============================================================================
â“ FAQ                                                               *finni-faq*
Q: Why another session plugin? ~

A1: All the other plugins (with the exception of `resession.nvim`)
    use `:mksession` under the hood
A2: Resession cannot be bent enough via its interface to support everything
    Finni does. Its API is difficult to build another plugin on top of
    (e.g. cannot get session table without Resession saving it to a file
    first).

Q: Why don't you want to use `:mksession`? ~

A: While it's amazing that this feature is built-in to vim, and it does an
   impressively good job for most situations, it is very difficult to
   customize. If `'sessionoptions'` covers your use case, then you're
   golden. If you want anything else, you're out of luck.

Q: Why `Finni`? ~

A: One might assume the name of this plugin is a word play on the French
   "c'est fini" or a contraction of "fin" (French: end) and either "nie"
   (German: never) or even the "Ni!" by the "Knights Who Say 'Ni!'",
   for some reason.

   But one would be mistaken.

   This plugin is dedicated to one of the loveliest creatures that ever
   walked our Earth, my little kind-hearted and trustful to a fault
   sweetie Finni. â¤ï¸

   You lived a long life (for a hamster...) and were the best boy
   until the end. I will miss you, your curiosity and your unwavering
   will dearly, my little Finni.

   Like your namesake plugin allows Neovim sessions to, may your memory
   live on forever.

==============================================================================
Type Reference                                            *finni-type-reference*


                                              *finni.auto.ActiveAutosessionInfo*
`finni.auto.ActiveAutosessionInfo` (CLASS) ~
    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)
      â€¢ {autosave_enabled} `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval} `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {name} `string`
          Name of the session
      â€¢ {tab_scoped} `boolean`
          Whether the session is tab-scoped
      â€¢ {is_autosession} `boolean`
          Whether this is an autosession or a manual one
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {tabid}? `(`|finni.core.TabID|`|true)`
          Tab number the session is attached to, if any. Can be `true`, which
          indicates itâ€™s a tab-scoped session that has not been restored
          yet - although not when requesting via the API
      â€¢ {autosession_config}? |finni.auto.AutosessionContext|
          When this is an autosession, the internal configuration that was
          rendered.

          Table fields:
          â€¢ {project} |finni.auto.AutosessionConfig.ProjectInfo|
          â€¢ {root} `string`
              The top level directory for this session (workspace root).
              Usually equals the project root, but can be different when
              git worktrees are used.
          â€¢ {name} `string`
              The name of the session
          â€¢ {config} |finni.auto.LoadOpts|
              Session-specific load/autosave options.
          â€¢ {cwd} `string`
              The effective working directory that was determined when loading
              this auto-session
      â€¢ {autosession_data}? |finni.core.Snapshot|
          The most recent snapshotted state of this named autosession

          Table fields:
          â€¢ {buffers} |finni.core.Snapshot.BufData|`[]`
              Buffer-specific data like name, buffer options, local marks,
              changelist
          â€¢ {tabs} |finni.core.Snapshot.TabData|`[]`
              Tab-specific and window layout data, including tab cwd and
              window-specific jumplists
          â€¢ {tab_scoped} `boolean`
              Whether this snapshot was derived from a single tab
          â€¢ {global} |finni.core.Snapshot.GlobalData|
              Global snapshot data like process CWD, global options and
              global marks
          â€¢ {modified}? `table<`|finni.core.BufUUID|`,true?>`
              List of buffers (identified by internal UUID) whose unsaved
              modifications were backed up in the snapshot
          â€¢ {buflist} `string[]`
              List of named buffers that are referenced somewhere in this
              snapshot. Used to reduce repetition of buffer paths in save
              file, especially lists of named marks (jumplist, quickfix and
              location lists).

                                      *finni.auto.AutosessionConfig.ProjectInfo*
`finni.auto.AutosessionConfig.ProjectInfo` (CLASS) ~
    Fields: ~
      â€¢ {data_dir} `string`
          The path of the directory that is used to save autosession data
          related to this project.
      â€¢ {name} `string`
          The name of the project
      â€¢ {repo}? |finni.auto.AutosessionSpec.GitInfo|
          When the project is defined as a git repository, meta info

          Table fields:
          â€¢ {commongitdir} `string`
              The common git dir, usually equal to gitdir, unless the worktree
              is not the default workdir (e.g.Â in worktree checkuots of
              bare repos). Then itâ€™s the actual repo root and gitdir is
              /worktrees/
          â€¢ {gitdir} `string`
              The repository (or worktree) data path
          â€¢ {toplevel} `string`
              The path of the checked out worktree
          â€¢ {branch}? `string`
              The branch the worktree has checked out
          â€¢ {default_branch}? `string`
              The name of the default branch

                                                 *finni.auto.AutosessionContext*
`finni.auto.AutosessionContext` (CLASS) ~
    Fields: ~
      â€¢ {project} |finni.auto.AutosessionConfig.ProjectInfo|
          Table fields:
          â€¢ {data_dir} `string`
              The path of the directory that is used to save autosession data
              related to this project.
          â€¢ {name} `string`
              The name of the project
          â€¢ {repo}? |finni.auto.AutosessionSpec.GitInfo|
              When the project is defined as a git repository, meta info
      â€¢ {root} `string`
          The top level directory for this session (workspace root). Usually
          equals the project root, but can be different when git worktrees
          are used.
      â€¢ {name} `string`
          The name of the session
      â€¢ {config} |finni.auto.LoadOpts|
          Session-specific load/autosave options.

          Table fields:
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {attach}? `boolean`
              Attach to/stay attached to session after operation
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
          â€¢ {reset}? `(boolean|"auto")`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot. `auto` resets only for global sessions.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
      â€¢ {cwd} `string`
          The effective working directory that was determined when loading
          this auto-session

                                            *finni.auto.AutosessionSpec.GitInfo*
`finni.auto.AutosessionSpec.GitInfo` (CLASS) ~

    Information about a Git repository that is associated with a project.

    Fields: ~
      â€¢ {commongitdir} `string`
          The common git dir, usually equal to gitdir, unless the worktree is
          not the default workdir (e.g.Â in worktree checkuots of bare repos).
          Then itâ€™s the actual repo root and gitdir is /worktrees/
      â€¢ {gitdir} `string`
          The repository (or worktree) data path
      â€¢ {toplevel} `string`
          The path of the checked out worktree
      â€¢ {branch}? `string`
          The branch the worktree has checked out
      â€¢ {default_branch}? `string`
          The name of the default branch

                                                        *finni.auto.EnabledHook*
`finni.auto.EnabledHook` (ALIAS) ~
    Type: ~
      `fun(meta: { cwd: string, project_name: string, session_name: string, workspace: string }) -> boolean`

    Function that decides whether an autosession should be processed further.
    Receives output of WorkspaceHook, ProjectNameHook and SessionNameHook.

                                                           *finni.auto.ListOpts*
`finni.auto.ListOpts` (CLASS) ~

    Options for listing autosessions in a project. `cwd`, `project_dir` and
    `project_name` are different ways of referencing a project and only one
    of them is respected.

    Fields: ~
      â€¢ {cwd}? `string`
          Path to a directory associated with the project to list
      â€¢ {project_dir}? `string`
          Path to the project session dir
      â€¢ {project_name}? `string`
          Name of the project

                                                    *finni.auto.ListProjectOpts*
`finni.auto.ListProjectOpts` (CLASS) ~
    Fields: ~
      â€¢ {with_sessions}? `boolean`
          Additionally list all known sessions for each listed project.
          Defaults to false.

                                                           *finni.auto.LoadOpts*
`finni.auto.LoadOpts` (ALIAS) ~
    Type: ~
      `(`|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.Attach|` & `|finni.SideEffects.Save|` & `|finni.SideEffects.ResetAuto|` & `|finni.SideEffects.SilenceErrors|` & `|finni.core.PassthroughOpts|`)`

    API options for `auto.load`

    Fields: ~
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {attach}? `boolean`
          Attach to/stay attached to session after operation
      â€¢ {save}? `boolean`
          Save/override autosave config for affected sessions before the
          operation
      â€¢ {reset}? `(boolean|"auto")`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring a
          snapshot. `auto` resets only for global sessions.
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation

                                                       *finni.auto.LoadOptsHook*
`finni.auto.LoadOptsHook` (ALIAS) ~
    Type: ~
      `fun(meta: { cwd: string, project_name: string, session_name: string, workspace: string }) -> auto.LoadOpts?`

    Function that can return autosession-specific load option overrides.
    Receives output of WorkspaceHook, ProjectNameHook and SessionNameHook.

                                                *finni.auto.MigrateProjectsOpts*
`finni.auto.MigrateProjectsOpts` (CLASS) ~
    Fields: ~
      â€¢ {dry_run}? `boolean`
          Donâ€™t execute the migration, only show what would have happened.
          Defaults to true, meaning you need to explicitly set this to `false`
          to have an effect.
      â€¢ {old_root}? `string`
          If the value of `autosession.dir` has changed, the old value.
          Defaults to `autosession.dir`.

                                                    *finni.auto.ProjectNameHook*
`finni.auto.ProjectNameHook` (ALIAS) ~
    Type: ~
      `fun(workspace: string, git_info: auto.AutosessionSpec.GitInfo?) -> string`

    Function that derives the project name from output of WorkspaceHook.

                                                          *finni.auto.ResetOpts*
`finni.auto.ResetOpts` (CLASS) ~

    API options for `auto.reset`

    Fields: ~
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.
      â€¢ {notify}? `boolean`
          Notify on success
      â€¢ {cwd}? `(string|true)`
          Path to a directory associated with the session to reset instead of
          current one. Set this to `true` to use nvimâ€™s current global CWD.
      â€¢ {reload}? `boolean`
          Attempt to restart a new autosession after reset. Defaults to true.

                                                   *finni.auto.ResetProjectOpts*
`finni.auto.ResetProjectOpts` (CLASS) ~
    Fields: ~
      â€¢ {name}? `string`
          Specify the project to reset. If unspecified, resets active project,
          if available.
      â€¢ {force}? `boolean`
          Force recursive deletion of project dir outside of configured root

                                                           *finni.auto.SaveOpts*
`finni.auto.SaveOpts` (ALIAS) ~
    Type: ~
      `(`|finni.SideEffects.Attach|` & `|finni.SideEffects.Notify|` & `|finni.SideEffects.Reset|`)`

    API options for `auto.save`

    Fields: ~
      â€¢ {attach}? `boolean`
          Attach to/stay attached to session after operation
      â€¢ {notify}? `boolean`
          Notify on success
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.

                                                    *finni.auto.SessionNameHook*
`finni.auto.SessionNameHook` (ALIAS) ~
    Type: ~
      `fun(meta: { cwd: string, git_info: auto.AutosessionSpec.GitInfo?, project_name: string, workspace: string }) -> string`

    Function that derives the session name from output of WorkspaceHook
    and ProjectNameHook.

                                                           *finni.auto.SpecHook*
`finni.auto.SpecHook` (ALIAS) ~
    Type: ~
      `fun(cwd: string) -> auto.AutosessionSpec?`

    Function that derives autosession configuration from a path. The default
    implementation calls into all other autosession hooks that can be
    overridden in the config.

                                                      *finni.auto.WorkspaceHook*
`finni.auto.WorkspaceHook` (ALIAS) ~
    Type: ~
      `fun(cwd: string) -> (string,boolean)`

    Function that derives workspace root and git-tracked status from a path.

                                                               *finni.BufFilter*
`finni.BufFilter` (ALIAS) ~
    Type: ~
      `fun(bufnr: integer, opts: `|finni.core.snapshot.CreateOpts|`) -> boolean`

    Function that decides whether a buffer should be included in a snapshot.

                                                      *finni.core.ActiveSession*
`finni.core.ActiveSession` (CLASS) ~

    An active (attached) session.

    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)
      â€¢ {autosave_enabled} `boolean`
          Autosave this attached session in intervals and when detaching
      â€¢ {autosave_interval} `integer`
          Seconds between autosaves of this session, if enabled.
      â€¢ {name} `string`
      â€¢ {tab_scoped} `boolean`
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {tabid}? |finni.core.TabID|

                                                *finni.core.ActiveSession.new()*
new({name}, {session_file}, {state_dir}, {context_dir}, {opts}, {tabid}, {needs_restore})

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|
      â€¢ {tabid} `true`
      â€¢ {needs_restore} `true`

    Returns: ~
        |finni.core.PendingSession|`<`|finni.core.Session.TabTarget|`>`

                                      *finni.core.ActiveSession.from_snapshot()*
from_snapshot({name}, {session_file}, {state_dir}, {context_dir}, {opts})
    Create a new session by loading a snapshot, which you need to restore
    explicitly.

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} `(`|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}


    Returns: ~
      â€¢ {loaded_session}? |finni.core.PendingSession|
          Session object, if the snapshot could be loaded
      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot data, if it could be loaded

ActiveSession:add_hook({event}, {hook})    *finni.core.ActiveSession:add_hook()*

    Parameters: ~
      â€¢ {event} `"detach"`
      â€¢ {hook} |finni.core.Session.DetachHook|

    Returns: ~
        `self`

ActiveSession:update({opts})                 *finni.core.ActiveSession:update()*
    Update modifiable options without attaching/detaching a session

    Parameters: ~
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|

    Returns: ~
        {modified} `boolean`
          Indicates whether any config modifications occurred

ActiveSession:restore({opts}, {snapshot})   *finni.core.ActiveSession:restore()*
    Restore a snapshot from disk or memory It seems emmylua does not pick up
    this override and infers IdleSession instead.

    Parameters: ~
      â€¢ {opts}? `(`|finni.core.Session.RestoreOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot to restore. If unspecified, loads from file.

          Table fields:{{{
          â€¢ {buffers} |finni.core.Snapshot.BufData|`[]`
              Buffer-specific data like name, buffer options, local marks,
              changelist
          â€¢ {tabs} |finni.core.Snapshot.TabData|`[]`
              Tab-specific and window layout data, including tab cwd and
              window-specific jumplists
          â€¢ {tab_scoped} `boolean`
              Whether this snapshot was derived from a single tab
          â€¢ {global} |finni.core.Snapshot.GlobalData|
              Global snapshot data like process CWD, global options and
              global marks
          â€¢ {modified}? `table<`|finni.core.BufUUID|`,true?>`
              List of buffers (identified by internal UUID) whose unsaved
              modifications were backed up in the snapshot
          â€¢ {buflist} `string[]`
              List of named buffers that are referenced somewhere in this
              snapshot. Used to reduce repetition of buffer paths in save
              file, especially lists of named marks (jumplist, quickfix and
              location lists).
}}}


    Returns: ~
      â€¢ {self} |finni.core.ActiveSession|
          Same object.
      â€¢ {success} `boolean`
          Whether restoration was successful. Only sensible when
          `silence_errors` is true.

ActiveSession:is_attached()             *finni.core.ActiveSession:is_attached()*
    Check whether this session is attached correctly. Note: It must be the
    same instance that `:attach()` was called on, not a copy.

    Returns: ~
        `TypeGuard<`|finni.core.ActiveSession|`>`

ActiveSession:opts()                           *finni.core.ActiveSession:opts()*
    Turn the session object into opts for snapshot restore/save operations

    Returns: ~
        `(`|finni.core.Session.Init.Paths|` & `|finni.core.Session.Init.Autosave|` & `|finni.core.Session.Init.Meta|` & `|finni.core.snapshot.CreateOpts|`)`

ActiveSession:info()                           *finni.core.ActiveSession:info()*
    Get information about this session

    Returns: ~
        |finni.core.ActiveSessionInfo|

ActiveSession:delete({opts})                 *finni.core.ActiveSession:delete()*
    Delete a saved session

    Parameters: ~
      â€¢ {opts}? `(`|finni.SideEffects.Notify|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

ActiveSession:attach()                       *finni.core.ActiveSession:attach()*
    Attach this session. If it was loaded from a snapshot file, you must
    ensure you restore the snapshot (`:restore()`) before calling this method.
    Itâ€™s fine to attach an already attached session.

    Returns: ~
        |finni.core.ActiveSession|

ActiveSession:save({opts})                     *finni.core.ActiveSession:save()*
    Save this session following its configured configuration. Note: Any save
    configuration must be applied via `Session.update(opts)` before callig
    this method since all session-specific options that might be contained in
    `opts` are overridden with ones configured for the session.

    Parameters: ~
      â€¢ {opts} `unknown`
          Success notification setting plus options that need to be passed
          through to pre_save/post_save hooks.

    Returns: ~
        {success} `boolean`

ActiveSession:autosave({opts}, {force})    *finni.core.ActiveSession:autosave()*

    Parameters: ~
      â€¢ {opts}? `(`|finni.SideEffects.Notify|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {notify}? `boolean`
              Notify on success
}}}

      â€¢ {force}? `boolean`
          Force snapshot to be saved, regardless of autosave config

ActiveSession:detach({reason}, {opts})       *finni.core.ActiveSession:detach()*
    Detach from this session. Ensure the session is attached before trying to
    detach, otherwise youâ€™ll receive an error. Hint: If you are sure the
    session should be attached, but still receive an error, ensure that you
    call `detach()` on the specific session instance you called `:attach()`
    on before, not a copy. @param self ActiveSession

    Parameters: ~
      â€¢ {reason} `(`|finni.core.Session.DetachReasonBuiltin|`|string)`
          A reason for detaching, also passed to detach hooks. Only inbuilt
          reasons influence behavior by default.
      â€¢ {opts} `(`|finni.core.Session.DetachOpts|` & `|finni.core.PassthroughOpts|`)`
          Influence side effects. `reset` removes all associated resources.
          `save` overrides autosave behavior.

          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {save}? `boolean`
              Save/override autosave config for affected sessions before
              the operation
}}}


    Returns: ~
        {idle_session} |finni.core.IdleSession|
          Same data table, but now representing an idle session again.

ActiveSession:forget({self})                 *finni.core.ActiveSession:forget()*
    Mark a {tab} session as invalid (i.e.Â remembered as attached, but its tab
    is gone). Removes associated resources, skips autosave.

    Parameters: ~
      â€¢ {self} |finni.core.ActiveSession|`<`|finni.core.Session.TabTarget|`>`
          Active {tab} session to forget about. Errors if attempted with
          global sessions.

          Table fields:{{{
          â€¢ {session_file} `string`
              Path to the session file
          â€¢ {state_dir} `string`
              Path to the directory holding session-associated data
          â€¢ {context_dir} `string`
              Directory for shared state between all sessions in the
              same context (`dir` for manual sessions, project dir for
              autosessions)
          â€¢ {autosave_enabled} `boolean`
              Autosave this attached session in intervals and when detaching
          â€¢ {autosave_interval} `integer`
              Seconds between autosaves of this session, if enabled.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {tab_scoped} `boolean`
          â€¢ {tabid}? |finni.core.TabID|
          â€¢ {name} `string`
          â€¢ {_on_attach} |finni.core.Session.AttachHook|`[]`
          â€¢ {_on_detach} |finni.core.Session.DetachHook|`[]`
          â€¢ {_aug} `integer`
              Neovim augroup for this session
          â€¢ {_timer}? `uv.uv_timer_t`
              Autosave timer, if enabled
          â€¢ {_setup_autosave} `fun(self: `|finni.core.ActiveSession|`<`|finni.core.Session.TabTarget|`>)`
}}}


    Returns: ~
        {idle_session} |finni.core.IdleSession|`<`|finni.core.Session.TabTarget|`>`

                                                  *finni.core.ActiveSessionInfo*
`finni.core.ActiveSessionInfo` (CLASS) ~

    Represents the complete internal state of a session

    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)
      â€¢ {autosave_enabled} `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval} `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {name} `string`
          Name of the session
      â€¢ {tab_scoped} `boolean`
          Whether the session is tab-scoped
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {tabid}? `(`|finni.core.TabID|`|true)`
          Tab number the session is attached to, if any. Can be `true`, which
          indicates itâ€™s a tab-scoped session that has not been restored
          yet - although not when requesting via the API

                                                      *finni.core.AnonymousMark*
`finni.core.AnonymousMark` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `integer`
          Line number
      â€¢ {[2]} `integer`
          Column number

                                                            *finni.core.BufUUID*
`finni.core.BufUUID` (ALIAS) ~
    Type: ~
      `string`

    An internal UUID that is used to keep track of buffers between snapshot
    restorations.

                                                           *finni.core.FileMark*
`finni.core.FileMark` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `sub<string,"">`
          Absolute path to file this mark references
      â€¢ {[2]} `integer`
          Line number
      â€¢ {[3]} `integer`
          Column number

                                                        *finni.core.IdleSession*
`finni.core.IdleSession` (CLASS) ~

    A general session config that can be attached, turning it into an
    active session.

    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)
      â€¢ {autosave_enabled} `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval} `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {name} `string`
      â€¢ {tab_scoped} `boolean`
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {tabid}? |finni.core.TabID|

                                                  *finni.core.IdleSession.new()*
new({name}, {session_file}, {state_dir}, {context_dir}, {opts}, {tabid}, {needs_restore})

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|
      â€¢ {tabid} `true`
      â€¢ {needs_restore} `true`

    Returns: ~
        |finni.core.PendingSession|`<`|finni.core.Session.TabTarget|`>`

                                        *finni.core.IdleSession.from_snapshot()*
from_snapshot({name}, {session_file}, {state_dir}, {context_dir}, {opts})
    Create a new session by loading a snapshot, which you need to restore
    explicitly.

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} `(`|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}


    Returns: ~
      â€¢ {loaded_session}? |finni.core.PendingSession|
          Session object, if the snapshot could be loaded
      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot data, if it could be loaded

IdleSession:add_hook({event}, {hook})        *finni.core.IdleSession:add_hook()*

    Parameters: ~
      â€¢ {event} `"detach"`
      â€¢ {hook} |finni.core.Session.DetachHook|

    Returns: ~
        `self`

IdleSession:update({opts})                     *finni.core.IdleSession:update()*
    Update modifiable options without attaching/detaching a session

    Parameters: ~
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|

    Returns: ~
        {modified} `boolean`
          Indicates whether any config modifications occurred

IdleSession:restore({opts}, {snapshot})       *finni.core.IdleSession:restore()*
    Restore a snapshot from disk or memory

    Parameters: ~
      â€¢ {opts}? `(`|finni.core.Session.RestoreOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot data to restore. If unspecified, loads from file.

          Table fields:{{{
          â€¢ {buffers} |finni.core.Snapshot.BufData|`[]`
              Buffer-specific data like name, buffer options, local marks,
              changelist
          â€¢ {tabs} |finni.core.Snapshot.TabData|`[]`
              Tab-specific and window layout data, including tab cwd and
              window-specific jumplists
          â€¢ {tab_scoped} `boolean`
              Whether this snapshot was derived from a single tab
          â€¢ {global} |finni.core.Snapshot.GlobalData|
              Global snapshot data like process CWD, global options and
              global marks
          â€¢ {modified}? `table<`|finni.core.BufUUID|`,true?>`
              List of buffers (identified by internal UUID) whose unsaved
              modifications were backed up in the snapshot
          â€¢ {buflist} `string[]`
              List of named buffers that are referenced somewhere in this
              snapshot. Used to reduce repetition of buffer paths in save
              file, especially lists of named marks (jumplist, quickfix and
              location lists).
}}}


    Returns: ~
      â€¢ {self} |finni.core.IdleSession|
          The object itself, but now attachable
      â€¢ {success} `boolean`
          Whether restoration was successful. Only sensible when
          `silence_errors` is true.

IdleSession:is_attached()                 *finni.core.IdleSession:is_attached()*
    Check whether this session is attached correctly. Note: It must be the
    same instance that `:attach()` was called on, not a copy.

    Returns: ~
        `TypeGuard<`|finni.core.ActiveSession|`>`

IdleSession:opts()                               *finni.core.IdleSession:opts()*
    Turn the session object into opts for snapshot restore/save operations

    Returns: ~
        `(`|finni.core.Session.Init.Paths|` & `|finni.core.Session.Init.Autosave|` & `|finni.core.Session.Init.Meta|` & `|finni.core.snapshot.CreateOpts|`)`

IdleSession:info()                               *finni.core.IdleSession:info()*
    Get information about this session

    Returns: ~
        |finni.core.ActiveSessionInfo|

IdleSession:delete({opts})                     *finni.core.IdleSession:delete()*
    Delete a saved session

    Parameters: ~
      â€¢ {opts}? `(`|finni.SideEffects.Notify|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

IdleSession:attach()                           *finni.core.IdleSession:attach()*
    Attach this session. If it was loaded from a snapshot file, you must
    ensure you restore the snapshot (`:restore()`) before calling this method.
    Itâ€™s fine to attach an already attached session.

    Returns: ~
        |finni.core.ActiveSession|

IdleSession:save({opts})                         *finni.core.IdleSession:save()*
    Save this session following its configured configuration. Note: Any save
    configuration must be applied via `Session.update(opts)` before callig
    this method since all session-specific options that might be contained in
    `opts` are overridden with ones configured for the session.

    Parameters: ~
      â€¢ {opts} `unknown`
          Success notification setting plus options that need to be passed
          through to pre_save/post_save hooks.

    Returns: ~
        {success} `boolean`

                                                     *finni.core.layout.WinInfo*
`finni.core.layout.WinInfo` (CLASS) ~

    Window-specific snapshot data

    Fields: ~
      â€¢ {bufname} `string`
          The name of the buffer thatâ€™s displayed in the window.
      â€¢ {bufuuid} |finni.core.BufUUID|
          The bufferâ€™s UUID to track it over multiple sessions.
      â€¢ {current} `boolean`
          Whether the window was the active one when saved.
      â€¢ {view} `vim.fn.winsaveview.ret`
          Cursor position in file, relative position of file in window,
          curswant and other state
      â€¢ {width} `integer`
          Width of the window in number of columns.
      â€¢ {height} `integer`
          Height of the window in number of rows.
      â€¢ {options} `table<string,any>`
          Window-scoped options.
      â€¢ {old_winid} |finni.core.WinID|
          Window ID when snapshot was saved. Used to keep track of individual
          windows, especially loclist window restoration.
      â€¢ {extension_data} `any`
          If the window is supported by an extension, the data it needs
          to remember.
      â€¢ {cursor}? |finni.core.AnonymousMark|
          (row, col) tuple of the cursor position, mark-like => (1,
          0)-indexed. Deprecated in favor of view.

          Table fields:
          â€¢ {[1]} `integer`
              Line number
          â€¢ {[2]} `integer`
              Column number
      â€¢ {cwd}? `string`
          If a local working directory was set for the window, its path.
      â€¢ {extension}? `string`
          If the window is supported by an extension, the name of the
          extension.
      â€¢ {jumps}? `(`|finni.core.layout.WinInfo.JumplistEntry|`[],integer)`
          Window-local jumplist, number of steps from last entry to currently
          active one
      â€¢ {alt}? `integer`
          Index of the alternate file for this window in `buflist`, if any
      â€¢ {loclist_win}? |finni.core.WinID|
          Present for loclist windows. Window ID of the associated window,
          the one that opens selections (`filewinid`).
      â€¢ {loclists}? `(`|finni.core.Snapshot.QFList|`[],integer)`
          Location list stack and position of currently active one.

                                       *finni.core.layout.WinInfo.JumplistEntry*
`finni.core.layout.WinInfo.JumplistEntry` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `integer`
          Index of absolute path to file this mark references in `buflist`
      â€¢ {[2]} `integer`
          Line number
      â€¢ {[3]} `integer`
          Column number

                                                   *finni.core.layout.WinLayout*
`finni.core.layout.WinLayout` (ALIAS) ~
    Type: ~
      `(`|finni.core.layout.WinLayoutLeaf|`|`|finni.core.layout.WinLayoutBranch|`)`

                                             *finni.core.layout.WinLayoutBranch*
`finni.core.layout.WinLayoutBranch` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `("row"|"col")`
          Node type
      â€¢ {[2]} `(`|finni.core.layout.WinLayoutLeaf|`|`|finni.core.layout.WinLayoutBranch|`)[]`
          children

                                               *finni.core.layout.WinLayoutLeaf*
`finni.core.layout.WinLayoutLeaf` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `"leaf"`
          Node type
      â€¢ {[2]} |finni.core.layout.WinInfo|
          Saved window info

          Table fields:
          â€¢ {bufname} `string`
              The name of the buffer thatâ€™s displayed in the window.
          â€¢ {bufuuid} |finni.core.BufUUID|
              The bufferâ€™s UUID to track it over multiple sessions.
          â€¢ {current} `boolean`
              Whether the window was the active one when saved.
          â€¢ {cursor}? |finni.core.AnonymousMark|
              (row, col) tuple of the cursor position, mark-like => (1,
              0)-indexed. Deprecated in favor of view.
          â€¢ {view} `vim.fn.winsaveview.ret`
              Cursor position in file, relative position of file in window,
              curswant and other state
          â€¢ {width} `integer`
              Width of the window in number of columns.
          â€¢ {height} `integer`
              Height of the window in number of rows.
          â€¢ {options} `table<string,any>`
              Window-scoped options.
          â€¢ {old_winid} |finni.core.WinID|
              Window ID when snapshot was saved. Used to keep track of
              individual windows, especially loclist window restoration.
          â€¢ {cwd}? `string`
              If a local working directory was set for the window, its path.
          â€¢ {extension_data} `any`
              If the window is supported by an extension, the data it needs
              to remember.
          â€¢ {extension}? `string`
              If the window is supported by an extension, the name of the
              extension.
          â€¢ {jumps}? `(`|finni.core.layout.WinInfo.JumplistEntry|`[],integer)`
              Window-local jumplist, number of steps from last entry to
              currently active one
          â€¢ {alt}? `integer`
              Index of the alternate file for this window in `buflist`, if any
          â€¢ {loclist_win}? |finni.core.WinID|
              Present for loclist windows. Window ID of the associated window,
              the one that opens selections (`filewinid`).
          â€¢ {loclists}? `(`|finni.core.Snapshot.QFList|`[],integer)`
              Location list stack and position of currently active one.

                                                    *finni.core.PassthroughOpts*
`finni.core.PassthroughOpts` (ALIAS) ~
    Type: ~
      `table`

    Indicates that any unhandled opts are also passed through to custom hooks.

                                                     *finni.core.PendingSession*
`finni.core.PendingSession` (CLASS) ~

    Represents a session that has been loaded from a snapshot and needs to
    be applied still before being able to attach it.

    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)
      â€¢ {autosave_enabled} `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval} `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {name} `string`
      â€¢ {tab_scoped} `boolean`
      â€¢ {needs_restore} `true`
          Indicates this session has been loaded from a snapshot, but not
          restored yet. This session object cannot be attached yet, it needs
          to be restored first.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {tabid}? |finni.core.TabID|

                                               *finni.core.PendingSession.new()*
new({name}, {session_file}, {state_dir}, {context_dir}, {opts}, {tabid}, {needs_restore})

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|
      â€¢ {tabid} `true`
      â€¢ {needs_restore} `true`

    Returns: ~
        |finni.core.PendingSession|`<`|finni.core.Session.TabTarget|`>`

                                     *finni.core.PendingSession.from_snapshot()*
from_snapshot({name}, {session_file}, {state_dir}, {context_dir}, {opts})
    Create a new session by loading a snapshot, which you need to restore
    explicitly.

    Parameters: ~
      â€¢ {name} `string`
      â€¢ {session_file} `string`
      â€¢ {state_dir} `string`
      â€¢ {context_dir} `string`
      â€¢ {opts} `(`|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {meta}? `table`
              External data remembered in association with this session.
              Useful to build on top of the core API.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}


    Returns: ~
      â€¢ {loaded_session}? |finni.core.PendingSession|
          Session object, if the snapshot could be loaded
      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot data, if it could be loaded

PendingSession:add_hook({event}, {hook})  *finni.core.PendingSession:add_hook()*

    Parameters: ~
      â€¢ {event} `"detach"`
      â€¢ {hook} |finni.core.Session.DetachHook|

    Returns: ~
        `self`

PendingSession:update({opts})               *finni.core.PendingSession:update()*
    Update modifiable options without attaching/detaching a session

    Parameters: ~
      â€¢ {opts} |finni.core.Session.InitOptsWithMeta|

    Returns: ~
        {modified} `boolean`
          Indicates whether any config modifications occurred

                                           *finni.core.PendingSession:restore()*
PendingSession:restore({opts}, {snapshot})
    Restore a snapshot from disk or memory

    Parameters: ~
      â€¢ {opts}? `(`|finni.core.Session.RestoreOpts|` & `|finni.core.PassthroughOpts|`)`
          Table fields:{{{
          â€¢ {reset}? `boolean`
              When detaching a session in the process, unload associated
              resources/reset everything during the operation when restoring
              a snapshot.
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

      â€¢ {snapshot}? |finni.core.Snapshot|
          Snapshot data to restore. If unspecified, loads from file.

          Table fields:{{{
          â€¢ {buffers} |finni.core.Snapshot.BufData|`[]`
              Buffer-specific data like name, buffer options, local marks,
              changelist
          â€¢ {tabs} |finni.core.Snapshot.TabData|`[]`
              Tab-specific and window layout data, including tab cwd and
              window-specific jumplists
          â€¢ {tab_scoped} `boolean`
              Whether this snapshot was derived from a single tab
          â€¢ {global} |finni.core.Snapshot.GlobalData|
              Global snapshot data like process CWD, global options and
              global marks
          â€¢ {modified}? `table<`|finni.core.BufUUID|`,true?>`
              List of buffers (identified by internal UUID) whose unsaved
              modifications were backed up in the snapshot
          â€¢ {buflist} `string[]`
              List of named buffers that are referenced somewhere in this
              snapshot. Used to reduce repetition of buffer paths in save
              file, especially lists of named marks (jumplist, quickfix and
              location lists).
}}}


    Returns: ~
      â€¢ {self} |finni.core.IdleSession|
          The object itself, but now attachable
      â€¢ {success} `boolean`
          Whether restoration was successful. Only sensible when
          `silence_errors` is true.

PendingSession:is_attached()           *finni.core.PendingSession:is_attached()*
    Check whether this session is attached correctly. Note: It must be the
    same instance that `:attach()` was called on, not a copy.

    Returns: ~
        `TypeGuard<`|finni.core.ActiveSession|`>`

PendingSession:opts()                         *finni.core.PendingSession:opts()*
    Turn the session object into opts for snapshot restore/save operations

    Returns: ~
        `(`|finni.core.Session.Init.Paths|` & `|finni.core.Session.Init.Autosave|` & `|finni.core.Session.Init.Meta|` & `|finni.core.snapshot.CreateOpts|`)`

PendingSession:info()                         *finni.core.PendingSession:info()*
    Get information about this session

    Returns: ~
        |finni.core.ActiveSessionInfo|

PendingSession:delete({opts})               *finni.core.PendingSession:delete()*
    Delete a saved session

    Parameters: ~
      â€¢ {opts}? `(`|finni.SideEffects.Notify|` & `|finni.SideEffects.SilenceErrors|`)`
          Table fields:{{{
          â€¢ {notify}? `boolean`
              Notify on success
          â€¢ {silence_errors}? `boolean`
              Donâ€™t error during this operation
}}}

                                                 *finni.core.Session.AttachHook*
`finni.core.Session.AttachHook` (ALIAS) ~
    Type: ~
      `fun(session: `|finni.core.IdleSession|`)`

    Attach hooks can inspect the session. Modifying it in-place should work,
    but itâ€™s not officially supported.

                                                 *finni.core.Session.DetachHook*
`finni.core.Session.DetachHook` (ALIAS) ~
    Type: ~
      `(fun(session: `|finni.core.ActiveSession|`, reason: (`|finni.core.Session.DetachReasonBuiltin|`|string), opts: (`|finni.core.Session.DetachOpts|` & `|finni.core.PassthroughOpts|`)) -> (`|finni.core.Session.DetachOpts|` & `|finni.core.PassthroughOpts|`))?`

    Detach hooks can modify detach opts in place or return new ones. They
    can inspect the session. Modifying it in-place should work, but itâ€™s
    not officially supported.

                                                 *finni.core.Session.DetachOpts*
`finni.core.Session.DetachOpts` (ALIAS) ~
    Type: ~
      `(`|finni.SideEffects.Reset|` & `|finni.SideEffects.Save|`)`

    Options for detaching sessions

    Fields: ~
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.
      â€¢ {save}? `boolean`
          Save/override autosave config for affected sessions before the
          operation

                                        *finni.core.Session.DetachReasonBuiltin*
`finni.core.Session.DetachReasonBuiltin` (ALIAS) ~
    Type: ~
      `("delete"|"load"|"quit"|"request"|"save"|"tab_closed")`

    Detach reasons are passed to avoid unintended side effects during
    operations. They are passed to detach hooks as well. These are the ones
    built in to the core session handling.

                                              *finni.core.Session.Init.Autosave*
`finni.core.Session.Init.Autosave` (CLASS) ~
    Fields: ~
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.

                                                 *finni.core.Session.Init.Hooks*
`finni.core.Session.Init.Hooks` (CLASS) ~
    Fields: ~
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.

                                                  *finni.core.Session.Init.Meta*
`finni.core.Session.Init.Meta` (CLASS) ~
    Fields: ~
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.

                                                 *finni.core.Session.Init.Paths*
`finni.core.Session.Init.Paths` (CLASS) ~
    Fields: ~
      â€¢ {session_file} `string`
          Path to the session file
      â€¢ {state_dir} `string`
          Path to the directory holding session-associated data
      â€¢ {context_dir} `string`
          Directory for shared state between all sessions in the same context
          (`dir` for manual sessions, project dir for autosessions)

                                                   *finni.core.Session.InitOpts*
`finni.core.Session.InitOpts` (ALIAS) ~
    Type: ~
      `(`|finni.core.Session.Init.Autosave|` & `|finni.core.Session.Init.Hooks|` & `|finni.core.snapshot.CreateOpts|`)`

    Options to influence how an attached session is handled.

    Fields: ~
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._

                                           *finni.core.Session.InitOptsWithMeta*
`finni.core.Session.InitOptsWithMeta` (ALIAS) ~
    Type: ~
      `(`|finni.core.Session.InitOpts|` & `|finni.core.Session.Init.Meta|`)`

    Options to influence how an attached session is handled plus `meta` field,
    which can only be populated by passing it to the session constructor and
    is useful for custom session handling.

    Fields: ~
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.

                                                *finni.core.Session.RestoreOpts*
`finni.core.Session.RestoreOpts` (ALIAS) ~
    Type: ~
      `(`|finni.SideEffects.Reset|` & `|finni.SideEffects.SilenceErrors|`)`

    Options for basic snapshot restoration (different from session loading!).
    Note that `reset` here does not handle detaching other active sessions,
    it really resets everything if set to true. If set to false, opens a
    new tab. Handle with care!

    Fields: ~
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation

                                                  *finni.core.Session.TabTarget*
`finni.core.Session.TabTarget` (CLASS) ~

    The associated session is tab-scoped to this specific tab

    Fields: ~
      â€¢ {tab_scoped} `true`
      â€¢ {tabid} |finni.core.TabID|

                                                           *finni.core.Snapshot*
`finni.core.Snapshot` (CLASS) ~

    A snapshot of nvimâ€™s state.

    Fields: ~
      â€¢ {buffers} |finni.core.Snapshot.BufData|`[]`
          Buffer-specific data like name, buffer options, local marks,
          changelist

          Table fields:
          â€¢ {name} `string`
              Name of the buffer, usually its path. Can be empty when unsaved
              modifications are backed up.
          â€¢ {loaded} `boolean`
              Whether the buffer was loaded.
          â€¢ {options} `table<string,any>`
              Buffer-specific nvim options.
          â€¢ {last_pos} |finni.core.AnonymousMark|
              Position of the cursor when this buffer was last shown in a
              window (`"` mark). Only updated once a buffer becomes invisible.
              Visible buffer cursors are backed up in the window layout data.
          â€¢ {uuid} `string`
              A buffer-specific UUID intended to track it between sessions.
              Required to save/restore unnamed buffers.
          â€¢ {in_win} `boolean`
              Whether the buffer is visible in at least one window.
          â€¢ {changelist}? `(`|finni.core.Snapshot.BufData.ChangelistItem|`[],integer)`
              Changelist and changelist position (backwards from most recent
              entry) for this buffer. Position is always `0` when invisible
              buffers are saved.
          â€¢ {marks}? `table<string,`|finni.core.AnonymousMark|`?>`
              Saved buffer-local marks, if enabled
          â€¢ {bt}? `("acwrite"|"help"|"nofile"|"nowrite"|"quickfix"|"terminal"...)`
              `buftype` option of buffer. Unset if empty (`""`).
      â€¢ {tabs} |finni.core.Snapshot.TabData|`[]`
          Tab-specific and window layout data, including tab cwd and
          window-specific jumplists

          Table fields:
          â€¢ {options} `table<string,any>`
              Tab-specific nvim options. Currently only `cmdheight`.
          â€¢ {wins} |finni.core.layout.WinLayout|
              Window layout enriched with window-specific snapshot data
          â€¢ {cwd}? `string`
              Tab-local cwd, if different from the global one or a tab-scoped
              snapshot
          â€¢ {current}? `boolean`
      â€¢ {tab_scoped} `boolean`
          Whether this snapshot was derived from a single tab
      â€¢ {global} |finni.core.Snapshot.GlobalData|
          Global snapshot data like process CWD, global options and global
          marks

          Table fields:
          â€¢ {cwd} `string`
              Nvimâ€™s global cwd.
          â€¢ {height} `integer`
              `vim.o.lines` - `vim.o.cmdheight`
          â€¢ {width} `integer`
              `vim.o.columns`
          â€¢ {options} `table<string,any>`
              Global nvim options
          â€¢ {marks}? `table<string,`|finni.core.FileMark|`?>`
              Saved global marks, if enabled
          â€¢ {search_history} `boolean`
              Whether search history was saved in session-associated ShaDa
              file. If enabled, corresponding history in nvim process should
              be cleared before loading.
          â€¢ {command_history} `boolean`
              Whether command history was saved in session-associated ShaDa
              file. If enabled, corresponding history in nvim process should
              be cleared before loading.
          â€¢ {input_history} `boolean`
              Whether input history was saved in session-associated ShaDa
              file. If enabled, corresponding history in nvim process should
              be cleared before loading.
          â€¢ {expr_history} `boolean`
              Whether expression history was saved in session-associated
              ShaDa file. If enabled, corresponding history in nvim process
              should be cleared before loading.
          â€¢ {debug_history} `boolean`
              Whether debug history was saved in session-associated ShaDa
              file. If enabled, corresponding history in nvim process should
              be cleared before loading.
      â€¢ {buflist} `string[]`
          List of named buffers that are referenced somewhere in this
          snapshot. Used to reduce repetition of buffer paths in save file,
          especially lists of named marks (jumplist, quickfix and location
          lists).
      â€¢ {modified}? `table<`|finni.core.BufUUID|`,true?>`
          List of buffers (identified by internal UUID) whose unsaved
          modifications were backed up in the snapshot

                                                   *finni.core.Snapshot.BufData*
`finni.core.Snapshot.BufData` (CLASS) ~

    Buffer-specific snapshot data like path, loaded state, options and last
    cursor position.

    Fields: ~
      â€¢ {name} `string`
          Name of the buffer, usually its path. Can be empty when unsaved
          modifications are backed up.
      â€¢ {loaded} `boolean`
          Whether the buffer was loaded.
      â€¢ {options} `table<string,any>`
          Buffer-specific nvim options.
      â€¢ {last_pos} |finni.core.AnonymousMark|
          Position of the cursor when this buffer was last shown in a window
          (`"` mark). Only updated once a buffer becomes invisible. Visible
          buffer cursors are backed up in the window layout data.

          Table fields:
          â€¢ {[1]} `integer`
              Line number
          â€¢ {[2]} `integer`
              Column number
      â€¢ {uuid} `string`
          A buffer-specific UUID intended to track it between sessions.
          Required to save/restore unnamed buffers.
      â€¢ {in_win} `boolean`
          Whether the buffer is visible in at least one window.
      â€¢ {changelist}? `(`|finni.core.Snapshot.BufData.ChangelistItem|`[],integer)`
          Changelist and changelist position (backwards from most recent
          entry) for this buffer. Position is always `0` when invisible
          buffers are saved.
      â€¢ {marks}? `table<string,`|finni.core.AnonymousMark|`?>`
          Saved buffer-local marks, if enabled
      â€¢ {bt}? `("acwrite"|"help"|"nofile"|"nowrite"|"quickfix"|"terminal"...)`
          `buftype` option of buffer. Unset if empty (`""`).

                                    *finni.core.Snapshot.BufData.ChangelistItem*
`finni.core.Snapshot.BufData.ChangelistItem` (CLASS) ~
    Fields: ~
      â€¢ {[1]} `integer`
          Line number
      â€¢ {[2]} `integer`
          Column number

                                                *finni.core.snapshot.CreateOpts*
`finni.core.snapshot.CreateOpts` (CLASS) ~

    Options to influence which data is included in a snapshot.

    Fields: ~
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._

                                                *finni.core.Snapshot.GlobalData*
`finni.core.Snapshot.GlobalData` (CLASS) ~

    Global snapshot data like cwd, height/width and global options.

    Fields: ~
      â€¢ {cwd} `string`
          Nvimâ€™s global cwd.
      â€¢ {height} `integer`
          `vim.o.lines` - `vim.o.cmdheight`
      â€¢ {width} `integer`
          `vim.o.columns`
      â€¢ {options} `table<string,any>`
          Global nvim options
      â€¢ {search_history} `boolean`
          Whether search history was saved in session-associated ShaDa
          file. If enabled, corresponding history in nvim process should be
          cleared before loading.
      â€¢ {command_history} `boolean`
          Whether command history was saved in session-associated ShaDa
          file. If enabled, corresponding history in nvim process should be
          cleared before loading.
      â€¢ {input_history} `boolean`
          Whether input history was saved in session-associated ShaDa file.
          If enabled, corresponding history in nvim process should be cleared
          before loading.
      â€¢ {expr_history} `boolean`
          Whether expression history was saved in session-associated ShaDa
          file. If enabled, corresponding history in nvim process should be
          cleared before loading.
      â€¢ {debug_history} `boolean`
          Whether debug history was saved in session-associated ShaDa file.
          If enabled, corresponding history in nvim process should be cleared
          before loading.
      â€¢ {marks}? `table<string,`|finni.core.FileMark|`?>`
          Saved global marks, if enabled

                                                    *finni.core.Snapshot.QFList*
`finni.core.Snapshot.QFList` (CLASS) ~

    Represents a quickfix/location list

    Fields: ~
      â€¢ {idx} `integer`
          Current position in list
      â€¢ {title} `string`
          Title of list
      â€¢ {context} `any`
          Arbitrary context for this list, may be used by plugins
      â€¢ {quickfixtextfunc} `string`
          Function to customize the displayed text
      â€¢ {items} |finni.core.Snapshot.QFListItem|`[]`
          Items in the list

          Table fields:
          â€¢ {filename}? `integer`
              Index of path of the file this entry points to in `buflist`
          â€¢ {module} `string`
              Module name (?)
          â€¢ {lnum} `integer`
              Referenced line in the file, 1-indexed
          â€¢ {end_lnum}? `integer`
              For multiline items, last referenced line
          â€¢ {col} `integer`
              Referenced column in the line of the file, also 1-indexed
          â€¢ {end_col}? `integer`
              For ranged items, last referenced column number
          â€¢ {vcol} `boolean`
              Whether `col` is visual index or byte index
          â€¢ {nr} `integer`
              Item index in the list
          â€¢ {pattern} `string`
              Search pattern used to locate the item
          â€¢ {text} `string`
              Item description
          â€¢ {type} `string`
              Type of the item (?)
          â€¢ {valid} `boolean`
              Whether error message was recognized (?)
      â€¢ {efm}? `string`
          Error format string to use for parsing lines

                                                   *finni.core.Snapshot.TabData*
`finni.core.Snapshot.TabData` (CLASS) ~

    Tab-specific (options, cwd) and window layout snapshot data.

    Fields: ~
      â€¢ {options} `table<string,any>`
          Tab-specific nvim options. Currently only `cmdheight`.
      â€¢ {wins} |finni.core.layout.WinLayout|
          Window layout enriched with window-specific snapshot data
      â€¢ {cwd}? `string`
          Tab-local cwd, if different from the global one or a tab-scoped
          snapshot
      â€¢ {current}? `boolean`

                                                              *finni.core.TabID*
`finni.core.TabID` (ALIAS) ~
    Type: ~
      `integer`

    Nvim tab ID

                                                              *finni.core.WinID*
`finni.core.WinID` (ALIAS) ~
    Type: ~
      `integer`

    Nvim window ID

                                                               *finni.log.Level*
`finni.log.Level` (ALIAS) ~
    Type: ~
      `("TRACE"|"DEBUG"|"INFO"|"WARN"|"ERROR"|"OFF")`

    Log level name in uppercase, for internal references and log output

                                                                *finni.log.Line*
`finni.log.Line` (CLASS) ~

    Log call information passed to `handler`

    Fields: ~
      â€¢ {level} |finni.log.Level|
          Name of log level, uppercase
      â€¢ {message} `string`
          Final, formatted log message
      â€¢ {timestamp} `integer`
          UNIX timestamp of log message
      â€¢ {hrtime} `number`
          High-resolution time of log message (`[ns]`, arbitrary anchor)
      â€¢ {src_path} `string`
          Absolute path to the file the log call originated from
      â€¢ {src_line} `integer`
          Line in `src_path` the log call originated from

                                                      *finni.session.DeleteOpts*
`finni.session.DeleteOpts` (ALIAS) ~
    Type: ~
      `(`|finni.session.DirParam|` & `|finni.SideEffects.Notify|` & `|finni.SideEffects.Reset|` & `|finni.SideEffects.SilenceErrors|`)`

    API options for `session.delete`

    Fields: ~
      â€¢ {dir}? `string`
          Name of session directory (overrides config.dir)
      â€¢ {notify}? `boolean`
          Notify on success
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation

                                                        *finni.session.DirParam*
`finni.session.DirParam` (CLASS) ~
    Fields: ~
      â€¢ {dir}? `string`
          Name of session directory (overrides config.dir)

                                                        *finni.session.LoadOpts*
`finni.session.LoadOpts` (ALIAS) ~
    Type: ~
      `(`|finni.session.DirParam|` & `|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.Attach|` & `|finni.SideEffects.ResetAuto|` & `|finni.SideEffects.Save|` & `|finni.SideEffects.SilenceErrors|`)`

    API options for `session.load`

    Fields: ~
      â€¢ {dir}? `string`
          Name of session directory (overrides config.dir)
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {attach}? `boolean`
          Attach to/stay attached to session after operation
      â€¢ {reset}? `(boolean|"auto")`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring a
          snapshot. `auto` resets only for global sessions.
      â€¢ {save}? `boolean`
          Save/override autosave config for affected sessions before the
          operation
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation

                                                        *finni.session.SaveOpts*
`finni.session.SaveOpts` (ALIAS) ~
    Type: ~
      `(`|finni.session.DirParam|` & `|finni.core.Session.InitOptsWithMeta|` & `|finni.SideEffects.Attach|` & `|finni.SideEffects.Notify|` & `|finni.SideEffects.Reset|`)`

    API options for `session.save`

    Fields: ~
      â€¢ {dir}? `string`
          Name of session directory (overrides config.dir)
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {meta}? `table`
          External data remembered in association with this session. Useful
          to build on top of the core API.
      â€¢ {attach}? `boolean`
          Attach to/stay attached to session after operation
      â€¢ {notify}? `boolean`
          Notify on success
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.

                                                      *finni.SideEffects.Attach*
`finni.SideEffects.Attach` (CLASS) ~
    Fields: ~
      â€¢ {attach}? `boolean`
          Attach to/stay attached to session after operation

                                                      *finni.SideEffects.Notify*
`finni.SideEffects.Notify` (CLASS) ~
    Fields: ~
      â€¢ {notify}? `boolean`
          Notify on success

                                                       *finni.SideEffects.Reset*
`finni.SideEffects.Reset` (CLASS) ~
    Fields: ~
      â€¢ {reset}? `boolean`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring
          a snapshot.

                                                   *finni.SideEffects.ResetAuto*
`finni.SideEffects.ResetAuto` (CLASS) ~
    Fields: ~
      â€¢ {reset}? `(boolean|"auto")`
          When detaching a session in the process, unload associated
          resources/reset everything during the operation when restoring a
          snapshot. `auto` resets only for global sessions.

                                                        *finni.SideEffects.Save*
`finni.SideEffects.Save` (CLASS) ~
    Fields: ~
      â€¢ {save}? `boolean`
          Save/override autosave config for affected sessions before the
          operation

                                               *finni.SideEffects.SilenceErrors*
`finni.SideEffects.SilenceErrors` (CLASS) ~
    Fields: ~
      â€¢ {silence_errors}? `boolean`
          Donâ€™t error during this operation

                                                            *finni.TabBufFilter*
`finni.TabBufFilter` (ALIAS) ~
    Type: ~
      `fun(tabpage: integer, bufnr: integer, opts: `|finni.core.snapshot.CreateOpts|`) -> boolean`

    Function that decides whether a buffer should be included in a tab-scoped
    snapshot. BufFilter is called first, this is to refine acceptable
    buffers only.

                                                  *finni.UserConfig.autosession*
`finni.UserConfig.autosession` (CLASS) ~

    Configure autosession behavior and contents

    Fields: ~
      â€¢ {config}? |finni.core.Session.InitOpts|
          Save/load configuration for autosessions. Definitions in here
          override the defaults in `session`.

          Table fields:
          â€¢ {autosave_enabled}? `boolean`
              When this session is attached, automatically save it in
              intervals. Defaults to false.
          â€¢ {autosave_interval}? `integer`
              Seconds between autosaves of this session, if enabled. Defaults
              to 60.
          â€¢ {autosave_notify}? `boolean`
              Trigger a notification when autosaving this session. Defaults
              to true.
          â€¢ {on_attach}? |finni.core.Session.AttachHook|
              A function thatâ€™s called when attaching to this session.
              No global default.
          â€¢ {on_detach}? |finni.core.Session.DetachHook|
              A function thatâ€™s called when detaching from this session.
              No global default.
          â€¢ {options}? `string[]`
              Save and restore these Neovim (global|buffer|tab|window)
              options.
          â€¢ {buf_filter}? |finni.BufFilter|
              Function that decides whether a buffer should be included in
              a snapshot.
          â€¢ {tab_buf_filter}? |finni.TabBufFilter|
              Function that decides whether a buffer should be included in a
              tab-scoped snapshot. `buf_filter` is called first, this is to
              refine acceptable buffers only.
          â€¢ {modified}? `(boolean|"auto")`
              Save/load modified buffers and their undo history. If set to
              `auto` (default), does not save, but still restores modified
              buffers.
          â€¢ {jumps}? `boolean`
              Save/load window-specific jumplists, including current position
              (yes, for {allâ€…windows}, not just the active one like with
              ShaDa). If set to `auto` (default), does not save, but still
              restores saved jumplists.
          â€¢ {changelist}? `boolean`
              Save/load buffer-specific changelist (all buffers) and
              changelist position (visible buffers only).

              {Important}: Enabling this causes
              {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
              Consider tracking `local_marks` in addition to this.
          â€¢ {global_marks}? `boolean`
              Save/load global marks (A-Z, not 0-9 currently).

              _Only in global sessions._
          â€¢ {local_marks}? `boolean`
              Save/load buffer-specific (local) marks.

              {Note}: Enable this if you track the `changelist`.
          â€¢ {search_history}? `(integer|boolean)`
              Maximum number of search history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {command_history}? `(integer|boolean)`
              Maximum number of command history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {input_history}? `(integer|boolean)`
              Maximum number of input history items to persist. Defaults to
              false. If set to `true`, maps to the 'history' option.

              _Only in global sessions._
          â€¢ {expr_history}? `boolean`
              Persist expression history. Defaults to false. {Note}: Cannot
              set limit (currently), no direct support by neovim.

              _Only in global sessions._
          â€¢ {debug_history}? `boolean`
              Persist debug history. Defaults to false. {Note}: Cannot set
              limit (currently), no direct support by neovim.

              _Only in global sessions._
      â€¢ {dir}? `string`
          Name of the directory to store autosession projects in. Interpreted
          relative to `$XDG_STATE_HOME/$NVIM_APPNAME`. Defaults to `finni`.
      â€¢ {spec}? |finni.auto.SpecHook|
          This function implements the logic that derives the autosession spec
          from a path, usually the current working directory. If it returns an
          autosession spec, Finni automatically switches to the sessionâ€™s
          workspace root and tries to restore an existing matching session
          (matched by project name + session name). If it returns nothing,
          itâ€™s interpreted as "no autosession should be active".

          It is called during various points in Finniâ€™s lifecycle: 1. Neovim
          startup (if startup autosessions are enabled) 2. When Neovim changes
          its global working directory 3. When a git branch is switched (if
          you have installed gitsigns.nvim)

          If the return value does not match the current state, the currently
          active session (if any) is saved + closed and the new session
          (if any) restored.

          The default implementation calls `workspace`, `project_name`,
          `session_name`, `enabled` and `load_opts` to piece together the
          specification. By overriding this config field, you can implement
          a custom logic. Mind that the other hooks have no effect then
          (unless you call them manually).
      â€¢ {workspace}? |finni.auto.WorkspaceHook|
          Receive the effective nvim cwd, return workspace root and whether
          it is git-tracked.
      â€¢ {project_name}? |finni.auto.ProjectNameHook|
          Receive the workspace root dir and whether itâ€™s git-tracked,
          return the project-specific session directory name.
      â€¢ {session_name}? |finni.auto.SessionNameHook|
          Receive the effective nvim cwd, the workspace root, the project name
          and workspace repo git info and generate a session name.
      â€¢ {enabled}? |finni.auto.EnabledHook|
          Receive the effective nvim cwd, the workspace root and project
          name and decide whether an autosession with this configuration
          should be active.
      â€¢ {load_opts}? |finni.auto.LoadOptsHook|
          Influence how an autosession is loaded/persisted, e.g.Â load the
          session without attaching it or disable modified persistence.
          Merged on top of the default autosession configuration for this
          specific autosession only.

                                                         *finni.UserConfig.load*
`finni.UserConfig.load` (CLASS) ~

    Configure session list information detail and sort order

    Fields: ~
      â€¢ {detail}? `boolean`
          Show more detail about the sessions when selecting one to load.
          Disable if it causes lag.
      â€¢ {order}? `("modification_time"|"creation_time"|"filename")`
          Session list order

                                                          *finni.UserConfig.log*
`finni.UserConfig.log` (CLASS) ~

    Configure plugin logging

    Fields: ~
      â€¢ {level}? `("trace"|"debug"|"info"|"warn"|"error"|"off")`
          Minimum level to log at. Defaults to `warn`.
      â€¢ {notify_level}? `("trace"|"debug"|"info"|"warn"|"error"|"off")`
          Minimum level to use `vim.notify` for. Defaults to `warn`.
      â€¢ {notify_opts}? `table`
          Options to pass to `vim.notify`. Defaults to `{ title = "Finni" }`
      â€¢ {format}? `string`
          Log line format string. Note that this works
          like Pythonâ€™s f-strings. Defaults to
          `[%(level)s %(dtime)s] %(message)s%(src_sep)s[%(src_path)s:%(src_line)s]`.
          Available parameters: * `level` Uppercase level name * `message`
          Log message * `dtime` Formatted date/time string * `hrtime` Time
          in `[ns]` without absolute anchor * `src_path` Path to the file
          that called the log function * `src_line` Line in `src_path` that
          called the log function * `src_sep` Whitespace between log line
          and source of call, 2 tabs for single line, newline + tab for
          multiline log messages
      â€¢ {notify_format}? `string`
          Same as `format`, but for `vim.notify` message display. Defaults
          to `%(message)s`.
      â€¢ {time_format}? `string`
          `strftime` format string used for rendering time of call. Defaults
          to `%Y-%m-%d %H:%M:%S`
      â€¢ {handler}? `fun(line: `|finni.log.Line|`)`

                                                      *finni.UserConfig.session*
`finni.UserConfig.session` (CLASS) ~

    Configure default session behavior and contents, affects both manual
    and autosessions.

    Fields: ~
      â€¢ {autosave_enabled}? `boolean`
          When this session is attached, automatically save it in intervals.
          Defaults to false.
      â€¢ {autosave_interval}? `integer`
          Seconds between autosaves of this session, if enabled. Defaults
          to 60.
      â€¢ {autosave_notify}? `boolean`
          Trigger a notification when autosaving this session. Defaults
          to true.
      â€¢ {on_attach}? |finni.core.Session.AttachHook|
          A function thatâ€™s called when attaching to this session. No
          global default.
      â€¢ {on_detach}? |finni.core.Session.DetachHook|
          A function thatâ€™s called when detaching from this session. No
          global default.
      â€¢ {options}? `string[]`
          Save and restore these Neovim (global|buffer|tab|window) options.
      â€¢ {buf_filter}? |finni.BufFilter|
          Function that decides whether a buffer should be included in a
          snapshot.
      â€¢ {tab_buf_filter}? |finni.TabBufFilter|
          Function that decides whether a buffer should be included in a
          tab-scoped snapshot. `buf_filter` is called first, this is to
          refine acceptable buffers only.
      â€¢ {modified}? `(boolean|"auto")`
          Save/load modified buffers and their undo history. If set to `auto`
          (default), does not save, but still restores modified buffers.
      â€¢ {jumps}? `boolean`
          Save/load window-specific jumplists, including current position
          (yes, for {allâ€…windows}, not just the active one like with ShaDa).
          If set to `auto` (default), does not save, but still restores
          saved jumplists.
      â€¢ {changelist}? `boolean`
          Save/load buffer-specific changelist (all buffers) and changelist
          position (visible buffers only).

          {Important}: Enabling this causes
          {buffer-localâ€…marksâ€…toâ€…beâ€…cleared} during restoration.
          Consider tracking `local_marks` in addition to this.
      â€¢ {global_marks}? `boolean`
          Save/load global marks (A-Z, not 0-9 currently).

          _Only in global sessions._
      â€¢ {local_marks}? `boolean`
          Save/load buffer-specific (local) marks.

          {Note}: Enable this if you track the `changelist`.
      â€¢ {search_history}? `(integer|boolean)`
          Maximum number of search history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {command_history}? `(integer|boolean)`
          Maximum number of command history items to persist. Defaults to
          false. If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {input_history}? `(integer|boolean)`
          Maximum number of input history items to persist. Defaults to false.
          If set to `true`, maps to the 'history' option.

          _Only in global sessions._
      â€¢ {expr_history}? `boolean`
          Persist expression history. Defaults to false. {Note}: Cannot set
          limit (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {debug_history}? `boolean`
          Persist debug history. Defaults to false. {Note}: Cannot set limit
          (currently), no direct support by neovim.

          _Only in global sessions._
      â€¢ {dir}? `string`
          Name of the directory to store regular sessions in. Interpreted
          relative to `$XDG_STATE_HOME/$NVIM_APPNAME`.


vim:tw=78:ts=8:sw=4:sts=4:et:fdm=marker:fmr={{{,}}}:fen:ft=help:norl:
